<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒã‚¤ãƒŠãƒ“ãƒã‚¤ãƒˆ é‡‘æ¬ å­¦ç”Ÿå‘ã‘ãƒã‚¤ãƒˆè¨ºæ–­ | ã‚ãªãŸã«ãƒ”ãƒƒã‚¿ãƒªã®ãƒã‚¤ãƒˆã‚’è¦‹ã¤ã‘ã‚ˆã†</title>

    <!-- ğŸ†• è¿½åŠ : Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.7/dist/chart.umd.min.js"></script>

    <style>
        /* ========== ãƒªã‚»ãƒƒãƒˆãƒ»åŸºæœ¬è¨­å®š ========== */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #f8f9fa; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif; color: #333; line-height: 1.6; }
        
        .diagnosis-container { max-width: 800px; margin: 0 auto; padding: 20px; }

        /* ========== å…±é€šãƒœã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ« ========== */
        .btn {
            display: inline-block; padding: 15px 40px;
            background: linear-gradient(135deg, #00A0E9 0%, #0077C8 100%);
            color: white; border: none; border-radius: 50px;
            font-size: 16px; font-weight: bold; cursor: pointer;
            transition: all 0.3s ease; text-decoration: none;
            box-shadow: 0 4px 15px rgba(0, 160, 233, 0.3);
            width: 100%; max-width: 300px; text-align: center;
        }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(0, 160, 233, 0.4); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none; background: #ccc; box-shadow: none; }
        
        .btn-secondary { background: #e2e8f0; color: #2d3748; box-shadow: none; }
        .btn-secondary:hover { background: #cbd5e0; }

        /* ========== ç”»é¢å…±é€š ========== */
        .screen {
            background: white; border-radius: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.05);
            padding: 40px; margin-bottom: 20px; display: none;
        }
        .screen.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        h1, h2, h3 { color: #00A0E9; margin-bottom: 20px; text-align: center; }

        /* ========== ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ ========== */
        .feature-list { list-style: none; margin: 30px auto; max-width: 500px; text-align: left; }
        .feature-list li { padding: 10px 0 10px 30px; position: relative; }
        .feature-list li:before { content: "âœ“"; position: absolute; left: 0; color: #00A0E9; font-weight: bold; font-size: 20px; }

        /* ========== æœˆåå…¥åŠ›ç”»é¢ ========== */
        .income-input-group { display: flex; align-items: center; justify-content: center; gap: 10px; margin: 30px 0; }
        .income-input { width: 200px; padding: 10px; font-size: 24px; border: 2px solid #00A0E9; border-radius: 10px; text-align: right; }

        /* ========== è³ªå•ç”»é¢ï¼ˆ5å•ã‚»ãƒƒãƒˆè¡¨ç¤ºï¼‰ ========== */
        .progress-header { margin-bottom: 30px; }
        .progress-bar { width: 100%; height: 10px; background: #e2e8f0; border-radius: 5px; overflow: hidden; }
        .progress-fill { height: 100%; background: #00A0E9; width: 0%; transition: width 0.5s ease; }
        .progress-text { text-align: center; margin-top: 5px; font-size: 14px; color: #666; }

        .question-group { margin-bottom: 40px; }
        
        .single-question-block {
            margin-bottom: 30px; padding-bottom: 30px;
            border-bottom: 1px solid #eee;
        }
        .single-question-block:last-child { border-bottom: none; }
        
        .q-text { font-weight: bold; font-size: 18px; margin-bottom: 15px; color: #2d3748; }
        
        .options-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }
        
        .option-label {
            display: flex; flex-direction: column; align-items: center;
            cursor: pointer; position: relative;
        }
        
        .option-input { position: absolute; opacity: 0; }
        
        .option-circle {
            width: 40px; height: 40px; border-radius: 50%;
            border: 2px solid #ddd; background: #fff;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.2s; margin-bottom: 8px;
            font-weight: bold; color: #aaa;
        }
        
        .option-text { font-size: 12px; color: #666; text-align: center; line-height: 1.2; }

        .option-input:checked + .option-circle {
            background: #00A0E9; border-color: #00A0E9; color: white; transform: scale(1.1);
        }
        .option-input:checked ~ .option-text { color: #00A0E9; font-weight: bold; }

        .nav-buttons { display: flex; justify-content: space-between; gap: 20px; margin-top: 40px; }

        /* ========== çµæœç”»é¢ ========== */
        .result-type-badge {
            background: #e3f2fd; color: #00A0E9; padding: 10px 30px;
            border-radius: 30px; font-size: 24px; font-weight: bold;
            display: inline-block; margin: 10px 0;
        }
        
        /* ğŸ†• è¿½åŠ : ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆã®ãƒ©ãƒƒãƒ‘ãƒ¼ */
        .radar-chart-wrapper {
            max-width: 360px;
            margin: 25px auto;
            padding: 20px;
            background: #f8fafc;
            border-radius: 16px;
        }
        .radar-chart-title {
            text-align: center;
            font-size: 14px;
            font-weight: bold;
            color: #666;
            margin-bottom: 10px;
        }

        .job-card {
            background: #f8fafc; border-left: 5px solid #00A0E9;
            padding: 20px; margin-bottom: 20px; border-radius: 8px;
        }
        .job-title { font-size: 18px; font-weight: bold; color: #2d3748; margin-bottom: 10px; }
        .skill-tag {
            display: inline-block; background: white; color: #00A0E9;
            border: 1px solid #00A0E9; padding: 4px 12px; border-radius: 15px;
            font-size: 12px; margin: 2px;
        }

        .share-buttons { display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; margin-top: 20px; }
        .share-btn {
            display: flex; align-items: center; gap: 5px; padding: 10px 20px;
            border-radius: 5px; color: white; text-decoration: none; font-size: 14px;
        }
        .bg-x { background: #000; }
        .bg-line { background: #00B900; }
        .bg-insta { background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888); }

        /* ========== SPå¯¾å¿œ ========== */
        @media (max-width: 600px) {
            .screen { padding: 20px; }
            .options-grid { grid-template-columns: 1fr; gap: 5px; }
            .option-label { flex-direction: row; padding: 10px; border: 1px solid #eee; border-radius: 8px; }
            .option-circle { margin-bottom: 0; margin-right: 15px; width: 30px; height: 30px; font-size: 14px; }
            .option-text { font-size: 14px; text-align: left; }
            .option-input:checked + .option-circle { transform: none; }
            .option-label:has(.option-input:checked) { background: #f0f9ff; border-color: #00A0E9; }
            .btn { width: 100%; }
            .nav-buttons { flex-direction: column-reverse; }
            /* ğŸ†• è¿½åŠ : SPæ™‚ã®ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆèª¿æ•´ */
            .radar-chart-wrapper { max-width: 300px; padding: 15px; }
        }
    </style>
</head>
<body>

<div class="diagnosis-container">
    
    <!-- 1. ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
    <div id="screen-start" class="screen active">
        <h1>ğŸ’° é‡‘æ¬ å¤§å­¦ç”Ÿã®ãŸã‚ã®<br>ãƒã‚¤ãƒˆè¨ºæ–­</h1>
        <div style="text-align: center; color: #666; margin-bottom: 20px;">
            <p>æ€§æ ¼ãƒ»å¸Œæœ›æœˆåãƒ»åƒãæ–¹ã®ã‚¿ã‚¤ãƒ—ã‹ã‚‰<br>ã‚ãªãŸã«æœ€é©ãªãƒã‚¤ãƒˆã‚’ãƒãƒƒãƒãƒ³ã‚°ã—ã¾ã™ï¼</p>
        </div>
        <ul class="feature-list">
            <li>è³ªå•æ•°: å…¨30å•ï¼ˆ5å•Ã—6ãƒšãƒ¼ã‚¸ï¼‰</li>
            <li>æ‰€è¦æ™‚é–“: ç´„3åˆ†</li>
            <li>8ã¤ã®æ€§æ ¼ç‰¹æ€§ + åƒãæ–¹ã‚¿ã‚¤ãƒ—ã‚’åˆ†æ</li>
            <li>çµæœã‚’ã‚·ã‚§ã‚¢ã§Amazonã‚®ãƒ•ãƒˆåˆ¸ãŒå½“ãŸã‚‹ãƒãƒ£ãƒ³ã‚¹</li>
        </ul>
        <div style="text-align: center;">
            <button class="btn" onclick="goToScreen('screen-income')">è¨ºæ–­ã‚’ã¯ã˜ã‚ã‚‹</button>
        </div>
    </div>

    <!-- 2. æœˆåå…¥åŠ›ç”»é¢ -->
    <div id="screen-income" class="screen">
        <h2>ğŸ’µ ç›®æ¨™æœˆåã®è¨­å®š</h2>
        <p style="text-align: center;">ã‚ãªãŸãŒæœˆã«ç¨¼ããŸã„é‡‘é¡ã¯ï¼Ÿ</p>
        <div class="income-input-group">
            <input type="number" id="incomeInput" class="income-input" placeholder="50000" min="0" step="1000">
            <span style="font-size: 20px; font-weight: bold;">å††</span>
        </div>
        <p style="text-align: center; font-size: 14px; color: #999;">ä¾‹: 30,000å††ï¼ˆãŠå°é£ã„ç¨‹åº¦ï¼‰ / 80,000å††ï¼ˆæ‰¶é¤Šå†…ã‚®ãƒªã‚®ãƒªï¼‰ / 120,000å††ï¼ˆã‚¬ãƒƒãƒ„ãƒªï¼‰</p>
        <div style="text-align: center; margin-top: 30px;">
            <button class="btn" onclick="validateIncome()">æ¬¡ã¸é€²ã‚€</button>
        </div>
    </div>

    <!-- 3. è³ªå•ç”»é¢ -->
    <div id="screen-questions" class="screen">
        <div class="progress-header">
            <div class="progress-bar"><div id="progressFill" class="progress-fill"></div></div>
            <div id="progressText" class="progress-text">1 / 6 ãƒšãƒ¼ã‚¸</div>
        </div>

        <div id="questionContainer"></div>

        <div class="nav-buttons">
            <button class="btn btn-secondary" onclick="prevPage()" id="prevBtn" style="visibility: hidden;">æˆ»ã‚‹</button>
            <button class="btn" onclick="nextPage()" id="nextBtn">æ¬¡ã¸</button>
        </div>
    </div>

    <!-- 4. ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° -->
    <div id="screen-loading" class="screen" style="text-align: center; padding: 60px;">
        <div style="font-size: 40px; animation: spin 1s infinite linear; display: inline-block; margin-bottom: 20px;">ğŸ”„</div>
        <h3>è¨ºæ–­ä¸­...</h3>
        <p>ã‚ãªãŸã®å›ç­”ã‚’åˆ†æã—ã¦ã„ã¾ã™</p>
    </div>

    <!-- 5. çµæœç”»é¢ -->
    <div id="screen-result" class="screen">
        <h2>è¨ºæ–­çµæœ</h2>
        <div style="text-align: center;">
            <p>ã‚ãªãŸã®ã‚¿ã‚¤ãƒ—ã¯...</p>
            <div id="resultType" class="result-type-badge"></div>

            <!-- ğŸ†• è¿½åŠ : ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ -->
            <div class="radar-chart-wrapper">
                <div class="radar-chart-title">ğŸ“Š ã‚ãªãŸã®é©æ€§ãƒãƒ©ãƒ³ã‚¹</div>
                <canvas id="radarChart"></canvas>
            </div>

            <p id="resultDesc" style="margin: 20px 0; color: #666;"></p>
        </div>

        <div style="background: #fff8e1; padding: 20px; border-radius: 10px; margin: 30px 0; text-align: center;">
            <h3 style="color: #f57f17; margin-bottom: 10px;">ğŸ’° ç›®æ¨™æœˆå: <span id="resIncome"></span>å††</h3>
            <p>ã“ã‚Œã‚’é”æˆã™ã‚‹ãŸã‚ã®åƒãæ–¹ã¯...</p>
        </div>

        <h3>ãŠã™ã™ã‚ã®ãƒã‚¤ãƒˆ</h3>
        <div id="resultJobs"></div>

        <div style="background: #f0f4f8; padding: 20px; border-radius: 10px; text-align: center; margin-top: 40px;">
            <h4>ğŸ çµæœã‚’ã‚·ã‚§ã‚¢ã—ã¦ã‚®ãƒ•ãƒˆåˆ¸GET!</h4>
            <div class="share-buttons">
                <a href="#" id="shareX" class="share-btn bg-x" target="_blank">Xã§ã‚·ã‚§ã‚¢</a>
                <a href="#" id="shareLine" class="share-btn bg-line" target="_blank">LINEã§ã‚·ã‚§ã‚¢</a>
            </div>
        </div>

        <div style="text-align: center; margin-top: 30px; display: flex; flex-direction: column; gap: 15px; align-items: center;">
            <a href="https://baito.mynavi.jp/" class="btn" target="_blank">ãƒã‚¤ãƒŠãƒ“ãƒã‚¤ãƒˆã§æ±‚äººã‚’æ¢ã™</a>
            <button class="btn btn-secondary" onclick="location.reload()">æœ€åˆã‹ã‚‰ã‚„ã‚Šç›´ã™</button>
        </div>
    </div>

</div>

<script>
    /* ========== ãƒ‡ãƒ¼ã‚¿å®šç¾© (30å•) ========== */
    const allQuestions = [
        // Page 1: åŸºæœ¬æ€§æ ¼ (ç¤¾äº¤æ€§ãƒ»å”èª¿æ€§)
        { id: 1, text: "åˆå¯¾é¢ã®äººã¨ã‚‚ç·Šå¼µã›ãšã«è©±ã›ã‚‹æ–¹ã ", category: "ç¤¾äº¤æ€§" },
        { id: 2, text: "ãƒãƒ¼ãƒ ã§å”åŠ›ã—ã¦ä½•ã‹ã‚’æˆã—é‚ã’ã‚‹ã®ãŒå¥½ãã ", category: "å”èª¿æ€§" },
        { id: 3, text: "å›°ã£ã¦ã„ã‚‹äººãŒã„ãŸã‚‰æ”¾ã£ã¦ãŠã‘ãªã„", category: "å”èª¿æ€§" },
        { id: 4, text: "è³‘ã‚„ã‹ãªå ´æ‰€ã‚„ã‚¤ãƒ™ãƒ³ãƒˆãŒå¥½ãã ", category: "ç¤¾äº¤æ€§" },
        { id: 5, text: "è‡ªåˆ†ã®æ„è¦‹ã‚ˆã‚Šå‘¨ã‚Šã®ç©ºæ°—ã‚’å„ªå…ˆã™ã‚‹ã“ã¨ãŒå¤šã„", category: "å”èª¿æ€§" },

        // Page 2: ä½œæ¥­ã‚¹ã‚¿ã‚¤ãƒ« (æ­£ç¢ºæ€§ãƒ»ç¶™ç¶šåŠ›)
        { id: 6, text: "å˜ç´”ä½œæ¥­ã‚’ã‚³ãƒ„ã‚³ãƒ„ç¶šã‘ã‚‹ã®ã¯è‹¦ã§ã¯ãªã„", category: "ç¶™ç¶šåŠ›" },
        { id: 7, text: "ç´°ã‹ã„ãƒŸã‚¹ã«ã™ãæ°—ã¥ãæ–¹ã ", category: "æ­£ç¢ºæ€§" },
        { id: 8, text: "ä¸€åº¦æ±ºã‚ãŸã“ã¨ã¯æœ€å¾Œã¾ã§ã‚„ã‚Šé‚ã’ã‚‹", category: "ç¶™ç¶šåŠ›" },
        { id: 9, text: "ãƒãƒ‹ãƒ¥ã‚¢ãƒ«é€šã‚Šã«æ­£ç¢ºã«é€²ã‚ã‚‹ã®ãŒå¾—æ„ã ", category: "æ­£ç¢ºæ€§" },
        { id: 10, text: "æ•´ç†æ•´é “ã¯å¥½ããªæ–¹ã ", category: "æ­£ç¢ºæ€§" },

        // Page 3: è¡Œå‹•ç‰¹æ€§ (è¡Œå‹•åŠ›ãƒ»ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—)
        { id: 11, text: "æ€ã„ç«‹ã£ãŸã‚‰ã™ãè¡Œå‹•ã«ç§»ã™ã‚¿ã‚¤ãƒ—ã ", category: "è¡Œå‹•åŠ›" },
        { id: 12, text: "ã‚°ãƒ«ãƒ¼ãƒ—ã®ä¸­ã§ã¯ãƒªãƒ¼ãƒ€ãƒ¼å½¹ã«ãªã‚‹ã“ã¨ãŒå¤šã„", category: "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—" },
        { id: 13, text: "æ–°ã—ã„ç’°å¢ƒã«é£›ã³è¾¼ã‚€ã“ã¨ã«ãƒ¯ã‚¯ãƒ¯ã‚¯ã™ã‚‹", category: "è¡Œå‹•åŠ›" },
        { id: 14, text: "äººã«æŒ‡ç¤ºã‚’å‡ºã—ãŸã‚Šæ•™ãˆãŸã‚Šã™ã‚‹ã®ãŒå¥½ãã ", category: "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—" },
        { id: 15, text: "å¤±æ•—ã—ã¦ã‚‚ã€Œãªã‚“ã¨ã‹ãªã‚‹ã€ã¨åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹", category: "è¡Œå‹•åŠ›" },

        // Page 4: çŸ¥çš„å¥½å¥‡å¿ƒãƒ»å‰µé€ æ€§
        { id: 16, text: "æ–°ã—ã„æµè¡Œã‚„ãƒˆãƒ¬ãƒ³ãƒ‰ã«ã¯æ•æ„Ÿã ", category: "ãƒˆãƒ¬ãƒ³ãƒ‰" },
        { id: 17, text: "è‡ªåˆ†ã§å·¥å¤«ã—ã¦åŠ¹ç‡ã‚’ä¸Šã’ã‚‹ã®ãŒå¥½ãã ", category: "å‰µé€ æ€§" },
        { id: 18, text: "æ–‡ç« ã‚’æ›¸ã„ãŸã‚Šã€ãƒ‡ã‚¶ã‚¤ãƒ³ã‚’è€ƒãˆã‚‹ã®ãŒå¥½ãã ", category: "å‰µé€ æ€§" },
        { id: 19, text: "SNSã§æƒ…å ±ã‚’ç™ºä¿¡ã™ã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚‹", category: "ãƒˆãƒ¬ãƒ³ãƒ‰" },
        { id: 20, text: "è«–ç†çš„ã«ç‰©äº‹ã‚’è€ƒãˆã‚‹ã®ãŒå¾—æ„ã ", category: "è«–ç†æ€§" },

        // Page 5: åƒãæ–¹ã®å¥½ã¿ (ç’°å¢ƒãƒ»ä½“åŠ›)
        { id: 21, text: "åº§ã£ã¦ã„ã‚‹ã‚ˆã‚Šä½“ã‚’å‹•ã‹ã—ã¦ã„ã‚‹æ–¹ãŒå¥½ãã ", category: "ä½“åŠ›" },
        { id: 22, text: "ä½“åŠ›ã«ã¯è‡ªä¿¡ãŒã‚ã‚‹æ–¹ã ", category: "ä½“åŠ›" },
        { id: 23, text: "ã©ã¡ã‚‰ã‹ã¨è¨€ãˆã°å¤œå‹äººé–“ã ", category: "å¤œå‹¤é©æ­£" },
        { id: 24, text: "å°‘äººæ•°ã€ã‚‚ã—ãã¯ä¸€äººã§é»™ã€…ã¨ä½œæ¥­ã—ãŸã„", category: "å€‹äººä½œæ¥­" },
        { id: 25, text: "æ—©èµ·ãã¯å¾—æ„ãªæ–¹ã ", category: "æœå‹" },

        // Page 6: ã‚¹ãƒˆãƒ¬ã‚¹è€æ€§ãƒ»æŸ”è»Ÿæ€§
        { id: 26, text: "æ€¥ãªäºˆå®šå¤‰æ›´ã«ã‚‚ã‚¤ãƒ©ã‚¤ãƒ©ã›ãšå¯¾å¿œã§ãã‚‹", category: "æŸ”è»Ÿæ€§" },
        { id: 27, text: "å¿™ã—ã„çŠ¶æ³ã§ã‚‚ãƒ‘ãƒ‹ãƒƒã‚¯ã«ãªã‚‰ãšå†·é™ã§ã„ã‚‰ã‚Œã‚‹", category: "æŸ”è»Ÿæ€§" },
        { id: 28, text: "ç†ä¸å°½ãªã“ã¨ãŒã‚ã£ã¦ã‚‚å¤§äººã®å¯¾å¿œãŒã§ãã‚‹", category: "å¿è€åŠ›" },
        { id: 29, text: "ãŠå®¢ã•ã‚“ã‹ã‚‰ã®ã‚¯ãƒ¬ãƒ¼ãƒ ã‚‚ã‚ã¾ã‚Šå¼•ããšã‚‰ãªã„", category: "å¿è€åŠ›" },
        { id: 30, text: "ã‚·ãƒ•ãƒˆã®èé€šãŒåŠ¹ããªã‚‰å¤šå°‘å¿™ã—ãã¦ã‚‚é ‘å¼µã‚Œã‚‹", category: "æŸ”è»Ÿæ€§" }
    ];

    const optionLabels = ["ãã†æ€ã‚ãªã„", "ã‚ã¾ã‚Šæ€ã‚ãªã„", "ã©ã¡ã‚‰ã§ã‚‚ãªã„", "ã‚„ã‚„ãã†æ€ã†", "ã¨ã¦ã‚‚ãã†æ€ã†"];
    const optionScores = [1, 2, 3, 4, 5];

    /* ========== ğŸ†• è¿½åŠ : ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆç”¨ 6è»¸ãƒãƒƒãƒ”ãƒ³ã‚° ==========
       æ—¢å­˜ã®12ã‚«ãƒ†ã‚´ãƒª â†’ 6è»¸ã«é›†ç´„ã™ã‚‹å¯¾å¿œè¡¨
    */
    const radarAxisMapping = {
        "æ¥å®¢":         ["ç¤¾äº¤æ€§", "å”èª¿æ€§", "å¿è€åŠ›"],
        "ã‚³ãƒ„ã‚³ãƒ„":     ["æ­£ç¢ºæ€§", "ç¶™ç¶šåŠ›", "å€‹äººä½œæ¥­"],
        "ä½“åŠ›":         ["ä½“åŠ›", "è¡Œå‹•åŠ›"],
        "ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–": ["å‰µé€ æ€§", "ãƒˆãƒ¬ãƒ³ãƒ‰", "è«–ç†æ€§"],
        "å¤œå‹":         ["å¤œå‹¤é©æ­£", "æŸ”è»Ÿæ€§"],
        "ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯":  ["å”èª¿æ€§", "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—"]
    };

    // çµæœãƒ‘ã‚¿ãƒ¼ãƒ³
    const resultTypes = [
        {
            name: "ã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ»ãƒã‚¹ã‚¿ãƒ¼",
            trigger: { cats: ["ç¤¾äº¤æ€§", "å”èª¿æ€§", "ãƒªãƒ¼ãƒ€ãƒ¼ã‚·ãƒƒãƒ—"], minScore: 12 },
            desc: "äººã¨é–¢ã‚ã‚‹ã“ã¨ãŒå¾—æ„ãªã‚ãªãŸã€‚ãƒãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’ç™ºæ®ã§ãã‚‹è·å ´ãŒè¼ãã¾ã™ã€‚",
            jobs: [
                { title: "ã‚«ãƒ•ã‚§ãƒ»å±…é…’å±‹ãƒ›ãƒ¼ãƒ«", wage: 1100, desc: "æŒã¡å‰ã®æ˜ã‚‹ã•ã§ãŠå®¢æ§˜ã‚’ãƒ•ã‚¡ãƒ³ã«ï¼" },
                { title: "ã‚¤ãƒ™ãƒ³ãƒˆã‚¹ã‚¿ãƒƒãƒ•", wage: 1200, desc: "ãƒãƒ¼ãƒ ä¸€ä¸¸ã¨ãªã£ã¦ã‚¤ãƒ™ãƒ³ãƒˆã‚’æˆåŠŸã•ã›ã‚‹é”æˆæ„Ÿã€‚" }
            ]
        },
        {
            name: "ã‚³ãƒ„ã‚³ãƒ„è·äººã‚¿ã‚¤ãƒ—",
            trigger: { cats: ["æ­£ç¢ºæ€§", "ç¶™ç¶šåŠ›", "å€‹äººä½œæ¥­"], minScore: 12 },
            desc: "é›†ä¸­åŠ›ã¨æ­£ç¢ºæ€§ãŒæ­¦å™¨ã€‚è‡ªåˆ†ã®ãƒšãƒ¼ã‚¹ã§é»™ã€…ã¨é€²ã‚ã‚‹ä½œæ¥­ãŒå‘ã„ã¦ã„ã¾ã™ã€‚",
            jobs: [
                { title: "ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ãƒ»äº‹å‹™", wage: 1150, desc: "æ­£ç¢ºãªä½œæ¥­ã§ã‚ªãƒ•ã‚£ã‚¹ãƒ¯ãƒ¼ã‚¯ã‚¹ã‚­ãƒ«ã‚‚GETã€‚" },
                { title: "å·¥å ´ãƒ»è»½ä½œæ¥­", wage: 1200, desc: "æ¥å®¢ãªã—ã§ä½œæ¥­ã«æ²¡é ­ã§ãã¾ã™ã€‚" }
            ]
        },
        {
            name: "ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ»ãƒãƒ£ãƒ¬ãƒ³ã‚¸ãƒ£ãƒ¼",
            trigger: { cats: ["è¡Œå‹•åŠ›", "ä½“åŠ›", "æŸ”è»Ÿæ€§"], minScore: 12 },
            desc: "ã˜ã£ã¨ã—ã¦ã„ã‚‹ã®ã¯è‹¦æ‰‹ï¼ä½“ã‚’å‹•ã‹ã—ã¦ã‚¬ãƒ³ã‚¬ãƒ³ç¨¼ãã‚¹ã‚¿ã‚¤ãƒ«ãŒæœ€é©ã€‚",
            jobs: [
                { title: "å¼•ã£è¶Šã—ãƒ»é…é€", wage: 1300, desc: "é«˜æ™‚çµ¦ã§ä½“ã‚‚é›ãˆã‚‰ã‚Œã‚‹ä¸€çŸ³äºŒé³¥ãƒã‚¤ãƒˆã€‚" },
                { title: "ãƒ†ãƒ¼ãƒãƒ‘ãƒ¼ã‚¯ã‚¹ã‚¿ãƒƒãƒ•", wage: 1100, desc: "åºƒã„åœ’å†…ã‚’å‹•ãå›ã‚ŠãªãŒã‚‰ã‚²ã‚¹ãƒˆã‚’ç¬‘é¡”ã«ã€‚" }
            ]
        },
        {
            name: "ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–ãƒ»ãƒˆãƒ¬ãƒ³ãƒ‰ã‚»ãƒƒã‚¿ãƒ¼",
            trigger: { cats: ["å‰µé€ æ€§", "ãƒˆãƒ¬ãƒ³ãƒ‰", "è«–ç†æ€§"], minScore: 12 },
            desc: "æµè¡Œã«æ•æ„Ÿã§ã‚»ãƒ³ã‚¹ãŒè‰¯ã„ã‚ãªãŸã€‚ãã®æ„Ÿæ€§ã‚’æ´»ã‹ã›ã‚‹ãƒã‚¤ãƒˆãŒãŠã™ã™ã‚ã€‚",
            jobs: [
                { title: "ã‚¢ãƒ‘ãƒ¬ãƒ«è²©å£²", wage: 1100, desc: "æœ€æ–°ãƒ•ã‚¡ãƒƒã‚·ãƒ§ãƒ³ã«å›²ã¾ã‚Œã¦ã‚»ãƒ³ã‚¹ã‚¢ãƒƒãƒ—ã€‚" },
                { title: "SNSé‹ç”¨ãƒ»Webãƒ©ã‚¤ã‚¿ãƒ¼", wage: 1200, desc: "ã‚¹ã‚­ãƒæ™‚é–“ã‚’ä½¿ã£ã¦ã‚ãªãŸã®ã‚»ãƒ³ã‚¹ã‚’ç™ºä¿¡ã€‚" }
            ]
        },
        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
        {
            name: "ã‚ªãƒ¼ãƒ«ãƒ©ã‚¦ãƒ³ãƒ€ãƒ¼",
            trigger: { cats: [], minScore: 0 },
            desc: "ãƒãƒ©ãƒ³ã‚¹æ„Ÿè¦šã«å„ªã‚ŒãŸã‚ãªãŸã€‚ã©ã‚“ãªç’°å¢ƒã§ã‚‚é©å¿œã§ãã‚‹ãƒãƒ†ãƒ³ã‚·ãƒ£ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚",
            jobs: [
                { title: "ã‚³ãƒ³ãƒ“ãƒ‹ã‚¨ãƒ³ã‚¹ã‚¹ãƒˆã‚¢", wage: 1050, desc: "å¤šæ§˜ãªæ¥­å‹™ã‚’çµŒé¨“ã§ãã€ç”Ÿæ´»ãƒªã‚ºãƒ ã«åˆã‚ã›ã¦åƒã‘ã¾ã™ã€‚" },
                { title: "ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒãƒ¼ã‚±ãƒƒãƒˆ", wage: 1080, desc: "åœ°åŸŸå¯†ç€ã§å®‰å®šã—ã¦é•·ãåƒã‘ã¾ã™ã€‚" }
            ]
        }
    ];

    /* ========== çŠ¶æ…‹ç®¡ç† ========== */
    let currentPage = 0;
    const questionsPerPage = 5;
    const totalPages = allQuestions.length / questionsPerPage;
    let answers = {};
    let userIncome = 0;

    /* ========== é–¢æ•° ========== */

    function goToScreen(screenId) {
        document.querySelectorAll('.screen').forEach(el => el.classList.remove('active'));
        document.getElementById(screenId).classList.add('active');
        window.scrollTo(0, 0);
        if(screenId === 'screen-questions') {
            renderQuestionsPage();
        }
    }

    function validateIncome() {
        const val = document.getElementById('incomeInput').value;
        if(val && val > 0) {
            userIncome = parseInt(val);
            goToScreen('screen-questions');
        } else {
            alert("å¸Œæœ›æœˆåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
        }
    }

    function renderQuestionsPage() {
        const container = document.getElementById('questionContainer');
        container.innerHTML = "";

        const startIdx = currentPage * questionsPerPage;
        const endIdx = startIdx + questionsPerPage;
        const pageQuestions = allQuestions.slice(startIdx, endIdx);

        pageQuestions.forEach((q) => {
            const qBlock = document.createElement('div');
            qBlock.className = 'single-question-block';
            
            let optionsHtml = `<div class="options-grid">`;
            optionLabels.forEach((label, idx) => {
                const score = optionScores[idx];
                const isChecked = answers[q.id] === score ? 'checked' : '';
                optionsHtml += `
                    <label class="option-label">
                        <input type="radio" name="q${q.id}" class="option-input" value="${score}" ${isChecked} onclick="recordAnswer(${q.id}, ${score})">
                        <div class="option-circle">${idx + 1}</div>
                        <div class="option-text">${label}</div>
                    </label>
                `;
            });
            optionsHtml += `</div>`;

            qBlock.innerHTML = `
                <div class="q-text">Q${q.id}. ${q.text}</div>
                ${optionsHtml}
            `;
            container.appendChild(qBlock);
        });

        const progressPercent = ((currentPage) / totalPages) * 100;
        document.getElementById('progressFill').style.width = `${progressPercent}%`;
        document.getElementById('progressText').textContent = `${currentPage + 1} / ${totalPages} ãƒšãƒ¼ã‚¸`;
        
        document.getElementById('prevBtn').style.visibility = currentPage === 0 ? 'hidden' : 'visible';
        document.getElementById('nextBtn').textContent = currentPage === totalPages - 1 ? 'è¨ºæ–­çµæœã‚’è¦‹ã‚‹' : 'æ¬¡ã®5å•ã¸';

        window.scrollTo(0, 0);
    }

    window.recordAnswer = function(qId, score) {
        answers[qId] = score;
    }

    window.nextPage = function() {
        const startIdx = currentPage * questionsPerPage;
        const endIdx = startIdx + questionsPerPage;
        const pageQIds = allQuestions.slice(startIdx, endIdx).map(q => q.id);
        
        const missed = pageQIds.some(id => !answers[id]);
        if(missed) {
            alert("ã™ã¹ã¦ã®è³ªå•ã«å›ç­”ã—ã¦ãã ã•ã„");
            return;
        }

        if(currentPage < totalPages - 1) {
            currentPage++;
            renderQuestionsPage();
        } else {
            calcResult();
        }
    }

    window.prevPage = function() {
        if(currentPage > 0) {
            currentPage--;
            renderQuestionsPage();
        }
    }

    // çµæœè¨ˆç®—
    function calcResult() {
        goToScreen('screen-loading');

        // ã‚«ãƒ†ã‚´ãƒªã”ã¨ã®ã‚¹ã‚³ã‚¢é›†è¨ˆ
        let catScores = {};
        allQuestions.forEach(q => {
            if(!catScores[q.category]) catScores[q.category] = 0;
            catScores[q.category] += (answers[q.id] || 0);
        });

        /* ğŸ†• è¿½åŠ : ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆç”¨ 6è»¸ã‚¹ã‚³ã‚¢ã‚’è¨ˆç®— */
        let radarScores = {};
        for (const [axisName, cats] of Object.entries(radarAxisMapping)) {
            let total = 0;
            let questionCount = 0;
            cats.forEach(cat => {
                // ãã®ã‚«ãƒ†ã‚´ãƒªã«å±ã™ã‚‹è³ªå•æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
                const qsInCat = allQuestions.filter(q => q.category === cat);
                questionCount += qsInCat.length;
                total += (catScores[cat] || 0);
            });
            // 5æ®µéšã«æ­£è¦åŒ–ï¼ˆå¹³å‡ã‚¹ã‚³ã‚¢: 1ã€œ5ï¼‰
            radarScores[axisName] = questionCount > 0 ? Math.round((total / questionCount) * 10) / 10 : 0;
        }

        // ã‚¿ã‚¤ãƒ—åˆ¤å®šï¼ˆæ—¢å­˜ãƒ­ã‚¸ãƒƒã‚¯ï¼‰
        let matchedType = resultTypes[resultTypes.length - 1];

        const sortedCats = Object.entries(catScores).sort((a,b) => b[1] - a[1]);
        const topCatNames = sortedCats.slice(0, 3).map(entry => entry[0]);

        for(let i = 0; i < resultTypes.length - 1; i++) {
            const type = resultTypes[i];
            let currentScore = 0;
            type.trigger.cats.forEach(c => {
                 currentScore += (catScores[c] || 0);
            });
            type.score = currentScore;
        }
        
        const bestMatch = resultTypes.slice(0, resultTypes.length - 1).sort((a,b) => b.score - a.score)[0];
        if(bestMatch && bestMatch.score > 20) {
            matchedType = bestMatch;
        }

        setTimeout(() => {
            showResult(matchedType, radarScores); // ğŸ†• radarScores ã‚’æ¸¡ã™
        }, 1500);
    }

    // çµæœè¡¨ç¤º
    function showResult(type, radarScores) {
        goToScreen('screen-result');

        document.getElementById('resultType').textContent = type.name;
        document.getElementById('resultDesc').textContent = type.desc;
        document.getElementById('resIncome').textContent = userIncome.toLocaleString();

        /* ğŸ†• è¿½åŠ : ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆæç”» */
        drawRadarChart(radarScores);

        // ãŠã™ã™ã‚ãƒã‚¤ãƒˆè¡¨ç¤º
        const jobsHtml = type.jobs.map(job => {
            const hours = Math.ceil(userIncome / job.wage);
            return `
                <div class="job-card">
                    <div class="job-title">${job.title}</div>
                    <p style="font-size: 14px; color: #666; margin-bottom: 8px;">${job.desc}</p>
                    <div style="font-size: 14px; background: white; padding: 10px; border-radius: 5px;">
                        æ™‚çµ¦ç›®å®‰: <strong>${job.wage}å††</strong> / 
                        ç›®æ¨™é”æˆã«ã¯: <strong>æœˆ${hours}æ™‚é–“</strong>
                    </div>
                </div>
            `;
        }).join('');
        document.getElementById('resultJobs').innerHTML = jobsHtml;

        // ã‚·ã‚§ã‚¢ãƒªãƒ³ã‚¯ç”Ÿæˆ
        const text = `ç§ã¯ã€Œ${type.name}ã€ã‚¿ã‚¤ãƒ—ã§ã—ãŸï¼ç›®æ¨™æœˆåã¯${userIncome/10000}ä¸‡å††ğŸ’° ã‚ãªãŸã‚‚è¨ºæ–­ã—ã¦ã¿ã‚‹ï¼Ÿ`;
        const url = encodeURIComponent(location.href);
        document.getElementById('shareX').href = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${url}&hashtags=ãƒã‚¤ãƒŠãƒ“ãƒã‚¤ãƒˆè¨ºæ–­`;
        document.getElementById('shareLine').href = `https://social-plugins.line.me/lineit/share?url=${url}`;
    }

    /* ğŸ†• è¿½åŠ : ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆæç”»é–¢æ•° */
    function drawRadarChart(radarScores) {
        const ctx = document.getElementById('radarChart').getContext('2d');

        // å†è¨ºæ–­æ™‚ã«å‰ã®ãƒãƒ£ãƒ¼ãƒˆã‚’ç ´æ£„
        if (window.myRadarChart) {
            window.myRadarChart.destroy();
        }

        const labels = Object.keys(radarScores);
        const data   = Object.values(radarScores);

        window.myRadarChart = new Chart(ctx, {
            type: 'radar',
            data: {
                labels: labels,
                datasets: [{
                    label: 'ã‚ãªãŸã®é©æ€§',
                    data: data,
                    backgroundColor: 'rgba(0, 160, 233, 0.15)',    // ãƒã‚¤ãƒŠãƒ“ãƒ–ãƒ«ãƒ¼ï¼ˆè–„ï¼‰
                    borderColor: 'rgba(0, 160, 233, 0.8)',          // ãƒã‚¤ãƒŠãƒ“ãƒ–ãƒ«ãƒ¼
                    borderWidth: 2.5,
                    pointBackgroundColor: '#00A0E9',
                    pointBorderColor: '#fff',
                    pointBorderWidth: 2,
                    pointRadius: 5,
                    pointHoverRadius: 7,
                }]
            },
            options: {
                responsive: true,
                scales: {
                    r: {
                        beginAtZero: true,
                        min: 0,
                        max: 5,
                        ticks: {
                            stepSize: 1,
                            display: false,
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.06)',
                            lineWidth: 1,
                        },
                        angleLines: {
                            color: 'rgba(0, 0, 0, 0.06)',
                        },
                        pointLabels: {
                            font: {
                                size: 13,
                                weight: 'bold',
                            },
                            color: '#2d3748',
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false,
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                return context.label + ': ' + context.raw + ' / 5.0';
                            }
                        }
                    }
                },
                animation: {
                    duration: 1200,
                    easing: 'easeOutQuart',
                }
            }
        });
    }

</script>

</body>
</html>

